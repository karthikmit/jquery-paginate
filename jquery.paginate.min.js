(function(a){a.fn.paginate=function(b){return this.each(function(){var f={first_label:"First",prev_label:"Previous",next_label:"Next",last_label:"Last",ellipse_label:"...",pushstate:false,content:".page_content",navigation:".page_navigation",contain_navigation:true,items_per_page:5,abort_on_small_lists:false,num_page_links:5,show_first:true,show_last:true,show_next:true,show_prev:true,show_ellipse:true};var e=a.extend(true,{},f,b);var d=a(this);var h=a(e.content,d);var j=a(h).children();var p=e.contain_navigation?a(e.navigation,d):a(e.navigation);var l=j.size();var m=Math.ceil(l/e.items_per_page);var g=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/);var o=window.location.pathname;a(p).html("");d.removeClass("no-pagination");if(e.abort_on_small_lists&&(l<=e.items_per_page)){a(j).show();d.addClass("no-pagination");return true}c();n(1);function n(s){var u=e.items_per_page*(s-1);var r=u+e.items_per_page;var t=a(j).slice(u,r);a(j).hide();a(t).show();a(".page_link",p).removeClass("active");a('.page_link[data-page="'+s+'"]',p).addClass("active");var q=a(".page_link[data-page]",p);u=s-((e.num_page_links-1)/2)-1;r=s+((e.num_page_links-1)/2);if(r>q.size()){r=q.size();u=q.size()-e.num_page_links}if(u<0){u=0;r=e.num_page_links}if(r>q.size()){r=q.size()}a(q).hide();a(q).slice(u,r).show();a(".ellipse",p).hide();if(a(".page_link[data-page]",p).first().css("display")=="none"){a(".ellipse.less",p).show()}if(a(".page_link[data-page]",p).last().css("display")=="none"){a(".ellipse.more",p).show()}if(g&&e.pushstate){k(s)}}function c(){if(e.show_first){p.append(a('<span class="page_link first"><a href="#">'+e.first_label+"</a></span>").data("page",1))}if(e.show_prev){p.append(a('<span class="page_link prev"><a href="#">'+e.prev_label+"</a></span>"))}if(e.show_ellipse){p.append(a('<span class="ellipse less">'+e.ellipse_label+"</span>"))}for(i=1;i<=m;i++){p.append(a('<span class="page_link" data-page="'+i+'"><a href="#">'+i+"</a></span>").data("page",i))}if(e.show_ellipse){p.append(a('<span class="ellipse more">'+e.ellipse_label+"</span>"))}if(e.show_prev){p.append(a('<span class="page_link next"><a href="#">'+e.next_label+"</a></span>"))}if(e.show_last){p.append(a('<span class="page_link last"><a href="#">'+e.last_label+"</a></span>").data("page",m))}a(".page_link:not(.next, .prev)",p).click(function(){var q=a(this).data("page");n(q);return false});a(".page_link.next",p).click(function(){var q=a(".page_link.active",p).data("page");if(q<m){n(q+1)}return false});a(".page_link.prev",p).click(function(){var q=a(".page_link.active",p).data("page");if(q>1){n(q-1)}return false})}a(window).bind("popstate",function(){var q=window.event.state;if(q&&q.page){n(q.page)}});function k(q){window.history.pushState({page:q},null,null)}})}})(jQuery);