(function(a){a.fn.paginate=function(b){return this.each(function(){var g={first_label:"First",prev_label:"Previous",next_label:"Next",last_label:"Last",ellipse_label:"...",pushstate:false,content:".page_content",navigation:".page_navigation",contain_navigation:true,items_per_page:5,abort_on_small_lists:false,num_page_links:5,show_first:true,show_last:true,show_next:true,show_prev:true,show_ellipse:true};var f=a.extend(true,{},g,b);var e=a(this);var j=a(f.content,e);var k=a(j).children();var q=f.contain_navigation?a(f.navigation,e):a(f.navigation);var m=k.size();var n=Math.ceil(m/f.items_per_page);var h=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/);var p=window.location.pathname;a(q).html("");e.removeClass("no-pagination");if(f.abort_on_small_lists&&(m<=f.items_per_page)){a(k).show();e.addClass("no-pagination");return true}c();o(1,false);if(h){var d=window.history.state;if(d&&d.page){o(d.page,false)}}function o(t,v){if(v==undefined){v=true}var w=f.items_per_page*(t-1);var s=w+f.items_per_page;var u=a(k).slice(w,s);a(k).hide();a(u).show();a(".page_link",q).removeClass("active");a('.page_link[data-page="'+t+'"]',q).addClass("active");var r=a(".page_link[data-page]",q);w=t-((f.num_page_links-1)/2)-1;s=t+((f.num_page_links-1)/2);if(s>r.size()){s=r.size();w=r.size()-f.num_page_links}if(w<0){w=0;s=f.num_page_links}if(s>r.size()){s=r.size()}a(r).hide();a(r).slice(w,s).show();a(".ellipse",q).hide();if(a(".page_link[data-page]",q).first().css("display")=="none"){a(".ellipse.less",q).show()}if(a(".page_link[data-page]",q).last().css("display")=="none"){a(".ellipse.more",q).show()}if(h&&v&&f.pushstate){l(t)}}function c(){if(f.show_first){q.append(a('<span class="page_link first"><a href="#">'+f.first_label+"</a></span>").data("page",1))}if(f.show_prev){q.append(a('<span class="page_link prev"><a href="#">'+f.prev_label+"</a></span>"))}if(f.show_ellipse){q.append(a('<span class="ellipse less">'+f.ellipse_label+"</span>"))}for(i=1;i<=n;i++){q.append(a('<span class="page_link" data-page="'+i+'"><a href="#">'+i+"</a></span>").data("page",i))}if(f.show_ellipse){q.append(a('<span class="ellipse more">'+f.ellipse_label+"</span>"))}if(f.show_prev){q.append(a('<span class="page_link next"><a href="#">'+f.next_label+"</a></span>"))}if(f.show_last){q.append(a('<span class="page_link last"><a href="#">'+f.last_label+"</a></span>").data("page",n))}a(".page_link:not(.next, .prev)",q).click(function(){var r=a(this).data("page");o(r);return false});a(".page_link.next",q).click(function(){var r=a(".page_link.active",q).data("page");if(r<n){o(r+1)}return false});a(".page_link.prev",q).click(function(){var r=a(".page_link.active",q).data("page");if(r>1){o(r-1)}return false})}a(window).bind("popstate",function(){var r=window.event.state;if(r&&r.page){o(r.page,false)}});function l(r){window.history.pushState({page:r},null,null)}})}})(jQuery);